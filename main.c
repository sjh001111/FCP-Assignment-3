/*
 * Lab07 G2
 *
 * 13740802 Joonghyuk Seong
 * 13659901 Min Soo Joh
 * 12700302 Dongwok Hong
 * 13659709 Hong Joo Lee
 * 13660042 Myungseok Seo
 * 
 * 1. Type "make" to build
 * 2. Type "./main.out" to run in default mode
 * 3. Type "./main.out debug" to run in debugging mode
 * 4. Type "make clean" to delete useless files
 */

#include <stdio.h> /* printf,scanf */ 
#include <string.h> /* */
#include "user.h" /*add_user, display_users, save_users, read_users 
                    sort_users,search_user, delete_user, debug*/

void print_menu(int dbg);
int menu(User users[], int *count, int i, int dbg);

int main(int argc, char *argv[])
{
    User users[MAX_USERS_SIZE];
    int i, count = 0, dbg = 0;

    if (argc > 1 && !strcmp(argv[1], "debug"))
        dbg = 1;

    do
    {
        print_menu(dbg);
        scanf("%d", &i);
        getchar();
        printf("\n");
    } while (menu(users, &count, i, dbg));

    return 0;
}

void print_menu(int dbg)
{
    // ภฬ พฦทกทฮ printf วิผ๖ดย widthฐก 80ภฺฐก ณัดยตฅ
    // 80ภฺ พฦทกทฮ ธธต้ ฐๆฟ์ ฤฺตๅภว ฐกตถผบภฬ 10รขณชฑโ ถงนฎฟก
    // ฑืด๋ทฮ ตฮดยฐิ ธยดูฐํ ฦวดว฿ดู~
    printf(
        "ยฆยฎยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฏ\n");
    if (dbg)
        printf("ยฆยญ Welcome to UTS Uber (Debug mode)                                    ยฆยญ\n");
    else
        printf("ยฆยญ Welcome to UTS Uber                                                 ยฆยญ\n");
    printf(
        "ยฆรยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆยฌยฆร\n"
        "ยฆยข 1. Add user (XOR encryption, caesar encryption)                     ยฆยข\n"
        "ยฆยข 2. Display users (XOR decryption, caesar decryption)                ยฆยข\n"
        "ยฆยข 3. Save users (Run-length encoding)                                 ยฆยข\n"
        "ยฆยข 4. Read users (Run-length decoding)                                 ยฆยข\n"
        "ยฆยข 5. Sort users (Binary search)                                       ยฆยข\n"
        "ยฆยข 6. Search user (Radix sort)                                         ยฆยข\n"
        "ยฆยข 7. Delete user                                                      ยฆยข\n");
    if (dbg)
        printf("ยฆยข 9. Debug                                                            ยฆยข\n");
    printf(
        "ยฆยข 0. Exit app                                                         ยฆยข\n"
        "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n"
        "  Enter the number: ");
}

int menu(User users[], int *count, int i, int dbg)
{
    switch (i)
    {
    case 1:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 1. Add user (XOR encryption, caesar encryption)                     ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        add_user(users, count);
        break;
    case 2:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 2. Display users (XOR decryption, caesar decryption)                ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        display_users(users, count);
        break;
    case 3:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 3. Save users (Run-length encoding)                                 ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        save_users(users, count);
        break;
    case 4:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 4. Read users (Run-length decoding)                                 ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        read_users(users, count);
        break;
    case 5:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 5. Sort users (Binary search)                                       ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        sort_users(users, count);
        break;
    case 6:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 6. Search user (Radix sort)                                         ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        search_user(users, count);
        break;
    case 7:
        printf(
            "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
            "ยฆยข 7. Delete user                                                      ยฆยข\n"
            "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
        delete_user(users, count);
        break;
    case 9:
        if (dbg)
        {
            printf(
                "ยฆยฃยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยค\n"
                "ยฆยข 9. Debug                                                            ยฆยข\n"
                "ยฆยฆยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยกยฆยฅ\n");
            debug(users, count);
        }
        break;
    case 0:
        return 0;
    default:
        printf("  Error: Please enter the valid number\n\n");
    }
    return 1;
}
